# Process this file with autoconf to produce a configure script.
AC_INIT(README, 0.1.0)
AC_CONFIG_HEADERS(config.h)

# Setup for automake
SDL_VERSION=1.2.3
SWIG_VERSION=1.3.21
PYT_VERSION=2.3

# Detect the canonical host and target build environment
AC_CANONICAL_HOST
AC_CANONICAL_TARGET

# Setup for automake
AM_INIT_AUTOMAKE(ariannexp, 0.11)


# Check for tools

AC_PROG_CXX
AC_PROG_LIBTOOL
dnl AM_PROG_CC_C_O

# Check for compiler environment
AC_C_CONST

# Check for libz
AC_CHECK_LIB(z, compress, , AC_MSG_ERROR([*** libz not found!]))

# Check for SDL
AM_PATH_SDL($SDL_VERSION,
            :,
	    AC_MSG_ERROR([*** SDL version $SDL_VERSION not found!])
)

AC_CHECK_LIB(SDL_net, SDLNet_Init, 
             SDLnet_LIBS="-lSDL_net",
	     AC_MSG_ERROR([*** SDL_net not found!]))
AC_DEFINE(HAVE_LIBSDL_net, [], [SDL_net]) 
AC_SUBST(SDLnet_LIBS)

# Check for SWIG
SWIG_PROG( $SWIG_VERSION )

# Check for Python
AM_PATH_PYTHON([$PYT_VERSION])
AM_CHECK_PYTHON_HEADERS(:, AC_MSG_ERROR([Python Headers not found]))
AC_CHECK_LIB(python$PYTHON_VERSION, Py_Initialize, ,
             AC_MSG_ERROR([*** libPython not found! Please check your Python installation])
)	     

CFLAGS="$CFLAGS $SDL_CFLAGS $PYTHON_INCLUDES"
LIBS="$LIBS $SDL_LIBS"

# Finally create all the generated files
AC_OUTPUT([
	Makefile  
	libClient/Makefile
	libFramework/Makefile
	libFramework/pyarianne/Makefile
	libGladiator/Makefile
	AIGladiator/Makefile
	])
